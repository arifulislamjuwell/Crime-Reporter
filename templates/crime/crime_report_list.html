{% extends 'base.html' %}
{% load static %}

{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="{% static 'notice.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'list.css' %}">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.1/moment.min.js"></script>
<br><br>
<br><br>
<br>
<br>
<div style="height: 100px; width: 100%;">
  <h1 style="text-align: center;color: red;">
    Crime Repot Information
  </h1>
  <p style="text-align: center;">
    <button onclick="location.href='{% url 'create_crime' %}'"
      style=" background-color: #003375;padding: 10px 24px; color: white;">Add Crime Report</button>
    <button onclick="location.href='{% url 'own_created_crime' %}'" style=" background-color: #003375;padding: 10px 24px; color: white;">Own created Crime</button>
  </p>
</div>

<form>
    {% csrf_token %}
  <div class="topnav">
    <div>
      <select name="choice" class='chech'>
        <option value="">Division</option>
        <option value="dhaka">Dhaka</option>
        <option value="chittagong">chittagong</option>
        <option value="barishal">Barishal</option>
        <option value="khulna">Khulna</option>
        <option value="rajshahi">Rajshahi</option>
        <option value="rangpur">Rangpur</option>
        <option value="sylhet">Sylhet</option>
        <option value="mymensingh">Mymensingh</option>
      </select>
    </div>
    <div>
      <select id="check11" name="dis">
        <option> zilla </option>
      </select>
    </div>

    <div class="search-container">
      <input type="text" placeholder="Search.." name="search">
      <button type="submit"><i class="fa fa-search"></i></button>
    </div>
  </div>


</form>
{% csrf_token %}
<div class="list-type3">
  <ol class="crime_post">
    {% for crime in crimereports %}
    <li onclick="document.getElementById('id01').style.display='block'" value="{{ crime.id }}" id="1">
      <a>{{ crime.name }} District- {{ crime.district }}</a>
    </li> 
    <br>
    <br>
    {% endfor %}

  </ol>
</div>
<p>

</p>
<div class="w3-container">
  <div id="id01" class="w3-modal">
    <div class="w3-modal-content w3-card-4">
      <header class="w3-container w3-teal">
        <span onclick="document.getElementById('id01').style.display='none'"
          class="w3-button w3-display-topright">&times;</span>
        <h2 id="c_title"></h2>
      </header>
      <div class="w3-container"><p></p>
        <table class="w3-table w3-blue">
          <tr>
            <th scope="row">Name</th>
            <td id="name"></td>

        </tr>
        <tr>
            <th scope="row"> Phone </th>
            <td id="phone"></td>

        </tr>
        <tr>
            <th scope="row">District </th>
            <td id="district"></td>

        </tr>
        <tr>
            <th scope="row"> Location</th>
            <td id="location"></td>
        </tr>
        <tr>
          <th scope="row"> Message </th>
          <td id="message"></td>
      </tr>
        </table>
        <p></p>
      </div>
      <footer class="w3-container w3-teal">
        <p id="post_time"> </p>
      </footer>
    </div>
  </div>
</div>



<script src="{% static 'loc.js' %}"></script>

<script>
    $('ol.crime_post li').click(function (e) {
      id = this.value
      e.preventDefault()

      $.ajax({
        type: 'POST',
        url: '{% url "show_crime" %}',
        data: {
          id: id,
          csrfmiddlewaretoken: $('input[name=csrfmiddlewaretoken]').val()
        },
        success: function (data) {
          var i;
          for (i = 0; i < data[Object.keys(data)[0]].length; i++) {
            switch (i) {
              case 0:
                name = data[Object.keys(data)[0]][i];
                break;
                case 1:
                title = data[Object.keys(data)[0]][i];
                break;
                case 2:
                phone = data[Object.keys(data)[0]][i];
                break;
                case 3:
                district = data[Object.keys(data)[0]][i];
                break;
                case 4:
                location_crime = data[Object.keys(data)[0]][i];
                break;
                case 5:
                message = data[Object.keys(data)[0]][i];
                break;
                case 6:
                post_time = data[Object.keys(data)[0]][i];
                break;

            }

          }

          document.getElementById('c_title').innerHTML =title
          document.getElementById('name').innerHTML =name
          document.getElementById('phone').innerHTML =phone
          document.getElementById('district').innerHTML =district
          document.getElementById('location').innerHTML =location_crime
          document.getElementById('message').innerHTML =message
          document.getElementById('post_time').innerHTML = moment(post_time).format('LL');
          
        }
      })

    });
</script>
<script>
  var modal = document.getElementById('id01');

  // When the user clicks anywhere outside of the modal, close it
  window.onclick = function (event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }
</script>
{% endblock %}